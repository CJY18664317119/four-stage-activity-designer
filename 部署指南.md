# 四阶段活动设计器 - 完整部署指南

## 🎯 项目概述

四阶段活动设计器是一个基于Vue 3 + Flask的教育管理平台，支持问题定向、原理探究、工程实践、产品展示四个阶段的活动设计。

## 📋 系统要求

### 本地开发环境
- Node.js 16.0+
- Python 3.8+
- 现代浏览器（Chrome、Firefox、Safari、Edge）

### 云端部署环境
- 腾讯云开发 CloudBase
- 云数据库
- 云函数
- 静态网站托管

## 🚀 本地开发部署

### 1. 启动后端服务

```bash
# 进入后端目录
cd 5/后端

# 安装Python依赖
pip install -i https://pypi.org/simple/ flask flask-cors pymysql werkzeug

# 启动后端服务（云开发模式，无需MySQL）
python app_cloudbase.py
```

后端服务将在 `http://localhost:5000` 启动

### 2. 启动前端服务

```bash
# 进入前端目录
cd 5/前端

# 安装Node.js依赖
npm install

# 启动开发服务器
npm run dev
```

前端服务将在 `http://localhost:5174` 启动

### 3. 测试系统

打开浏览器访问 `http://localhost:5174`，导航到四阶段活动设计器页面进行测试。

## ☁️ 腾讯云开发部署

### 1. 准备工作

1. **注册腾讯云开发账号**
   - 访问 [腾讯云开发官网](https://tcb.cloud.tencent.com/)
   - 注册并创建云开发环境
   - 记录环境ID（如：real4ps-1365736210）

2. **安装CloudBase CLI**
   ```bash
   npm install -g @cloudbase/cli
   ```

### 2. 部署云函数

```bash
# 进入云函数目录
cd 5/cloudfunctions/activity-api

# 安装依赖
npm install

# 部署云函数
tcb fn deploy activity-api
```

### 3. 部署前端

```bash
# 进入前端目录
cd 5/前端

# 构建生产版本
npm run build

# 部署到云开发静态网站托管
tcb hosting deploy dist
```

### 4. 配置云数据库

在腾讯云开发控制台中创建以下数据库集合：
- `problem_orientation` - 问题定向数据
- `principle_exploration` - 原理探究数据
- `engineering_practice` - 工程实践数据
- `product_display` - 产品展示数据

## 🔧 配置说明

### 环境变量配置

在 `5/前端/src/utils/api.js` 中配置：
```javascript
const CLOUDBASE_ENV_ID = 'your-env-id'; // 替换为您的云开发环境ID
```

### 云函数配置

在 `5/cloudfunctions/activity-api/index.js` 中配置：
```javascript
cloud.init({
  env: 'your-env-id' // 替换为您的云开发环境ID
})
```

## 📊 功能测试

### 1. API接口测试

使用提供的测试脚本：
```bash
# 在浏览器控制台运行
node 5/测试完整系统.js
```

### 2. 功能验证

- ✅ 问题定向阶段：情境描述、利益相关者、有利因素、约束因素
- ✅ 原理探究阶段：学习目标、材料准备、实验步骤、记录总结
- ✅ 工程实践阶段：知识分析、应用映射、场景应用、难点分析
- ✅ 产品展示阶段：产品标题、产品介绍、文件上传

## 🛠️ 故障排除

### 常见问题

1. **后端服务无法启动**
   - 检查Python版本（需要3.8+）
   - 检查依赖安装是否成功
   - 检查端口5000是否被占用

2. **前端页面无法访问**
   - 检查Node.js版本（需要16.0+）
   - 检查npm依赖安装
   - 检查端口5174是否被占用

3. **API调用失败**
   - 检查后端服务是否正常运行
   - 检查CORS配置
   - 检查网络连接

4. **数据保存失败**
   - 检查云开发环境配置
   - 检查云函数是否正常部署
   - 检查数据库权限设置

### 调试方法

1. **查看后端日志**
   ```bash
   python app_cloudbase.py
   ```

2. **查看前端控制台**
   - 打开浏览器开发者工具
   - 查看Console和Network标签页

3. **测试API接口**
   ```bash
   curl http://localhost:5000/health
   ```

## 📈 性能优化

### 前端优化
- 使用Vue 3 Composition API
- 组件懒加载
- 图片压缩和CDN
- 代码分割

### 后端优化
- 数据库连接池
- 缓存机制
- API响应压缩
- 错误处理

### 云开发优化
- 云函数冷启动优化
- 数据库索引优化
- 静态资源CDN加速
- 监控和日志

## 🔒 安全考虑

1. **数据安全**
   - 数据库访问权限控制
   - 敏感数据加密
   - 定期数据备份

2. **API安全**
   - 请求频率限制
   - 输入数据验证
   - 错误信息脱敏

3. **文件上传安全**
   - 文件类型验证
   - 文件大小限制
   - 恶意文件检测

## 📞 技术支持

如遇到问题，请：
1. 查看本文档的故障排除部分
2. 检查控制台错误信息
3. 联系技术支持团队

## 🎉 部署完成

恭喜！您的四阶段活动设计器已经成功部署。现在可以：
- 在本地进行开发和测试
- 在云端进行生产部署
- 享受无服务器架构的便利

---

**四阶段活动设计器** - 让教育管理更智能、更高效！
